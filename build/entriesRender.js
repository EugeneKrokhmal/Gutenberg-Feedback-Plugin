document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelector(".feedback-entries");async function t(t=1){try{const i=await fetch(feedbackEntriesData.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"fetch_feedback_entries",page:t,_wpnonce:feedbackEntriesData.nonce})}),c=await i.json();c.success?function(t,a,i){const c=e.querySelector(".entries-list"),s=e.querySelector(".wp-pagination"),r=e.querySelector(".entry-details");if([c,s,r].forEach((e=>{e&&(e.innerHTML="")})),t.length){t.forEach((({id:e,first_name:t,last_name:a,email:i,subject:s})=>{const r=document.createElement("li"),o=n(`${t} ${a} ${i} - ${s}`,"entry-detail-link",{entryId:e});r.appendChild(o),c.appendChild(r)}));for(let e=1;e<=a;e++){const t=n(e,"pagination-button wp-block-buttonwp.i18n.__link wp-element-button "+(e===i?"active":""),{page:e},e===i);s.appendChild(t)}}else c.innerHTML=`<p>${wp.i18n.__("No entries found.","feedback-plugin")}</p>`}(c.data.entries,c.data.totalPages,t):a(c.message||wp.i18n.__("Failed to load entries.","feedback-plugin"))}catch(e){i(wp.i18n.__("Error fetching entries.","feedback-plugin"),e)}}function n(e,t,n={},a=!1){const i=document.createElement("a");return i.textContent=e,i.className=t,a&&i.setAttribute("aria-disabled","true"),Object.entries(n).forEach((([e,t])=>{i.dataset[e]=t})),i}function a(e){alert(e)}function i(e,t){console.error(e,t),a(e)}e&&e.addEventListener("click",(function(n){const{target:c}=n;if(c.classList.contains("load-entries-button"))t();else if(c.classList.contains("pagination-button")){const e=parseInt(c.dataset.page,10);isNaN(e)||t(e)}else if(c.classList.contains("entry-detail-link")){const t=parseInt(c.dataset.entryId,10);isNaN(t)||async function(t){try{const n=await fetch(feedbackEntriesData.ajaxUrl,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:new URLSearchParams({action:"fetch_feedback_entry_details",entry_id:t,_wpnonce:feedbackEntriesData.nonce})}),i=await n.json();if(i.success){const t=e.querySelector(".entry-details"),{first_name:n,last_name:a,email:c,message:s,subject:r}=i.data.entry;t.innerHTML=`\n                <h3>${wp.i18n.__("Entry Details","feedback-plugin")}</h3>\n                <table class="entry-details">\n                    <tbody>\n                        <tr>\n                            <th align="left">${wp.i18n.__("Name:","feedback-plugin")}</th>\n                            <td>${n} ${a}</td>\n                        </tr>\n                        <tr>\n                            <th align="left">${wp.i18n.__("Email:","feedback-plugin")}</th>\n                            <td>${c}</td>\n                        </tr>\n                        <tr>\n                            <th align="left">${wp.i18n.__("Subject:","feedback-plugin")}</th>\n                            <td>${r}</td>\n                        </tr>\n                        <tr>\n                            <th align="left">${wp.i18n.__("Message:","feedback-plugin")}</th>\n                            <td>${s}</td>\n                        </tr>\n                    </tbody>\n                </table>\n            `}else a(i.message||wp.i18n.__("Failed to load entry details.","feedback-plugin"))}catch(e){i(wp.i18n.__("Error fetching entry details.","feedback-plugin"),e)}}(t)}}))}));